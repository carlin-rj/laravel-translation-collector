<?php

return [
    /*
    |--------------------------------------------------------------------------
    | 外部翻译API配置
    |--------------------------------------------------------------------------
    |
    | 配置外部翻译管理系统的API接口信息
    |
    */
    'external_api' => [
        'base_url' => env('TRANSLATION_API_URL', 'https://api.translation-system.com'),
        'token' => env('TRANSLATION_API_TOKEN', ''),
        'project_id' => env('TRANSLATION_PROJECT_ID', ''),
        'timeout' => env('TRANSLATION_API_TIMEOUT', 30),
        'retry_times' => env('TRANSLATION_API_RETRY_TIMES', 3),
        'retry_sleep' => env('TRANSLATION_API_RETRY_SLEEP', 100), // 毫秒

        // API端点配置
        'endpoints' => [
            'add_translation' => '/api/translations/add',      // 新增待翻译接口
            'get_translations' => '/api/translations/list',    // 获取翻译列表接口
            'sync_translations' => '/api/translations/sync',   // 同步翻译接口
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | 扫描路径配置
    |--------------------------------------------------------------------------
    |
    | 定义需要扫描翻译文本的目录和文件
    |
    */
    'scan_paths' => [
        'app/',
        'Modules/',
        'resources/views/',
        'resources/js/',
        'config/',
    ],

    /*
    |--------------------------------------------------------------------------
    | 排除路径配置
    |--------------------------------------------------------------------------
    |
    | 定义不需要扫描的目录和文件
    |
    */
    'exclude_paths' => [
        'vendor/',
        'storage/',
        'bootstrap/cache/',
        'public/',
        'node_modules/',
        '.git/',
        'tests/',
    ],

    /*
    |--------------------------------------------------------------------------
    | 翻译函数配置
    |--------------------------------------------------------------------------
    |
    | 定义项目中使用的翻译函数，扫描器会查找这些函数调用
    |
    */
    'translation_functions' => [
        '__',               // Laravel 标准翻译函数
        'trans',            // Laravel trans函数
        'Lang::get',        // Lang门面调用
        'app()->getLocale', // 获取当前语言
        '@lang',            // Blade模板指令
        'trans_choice',     // 复数翻译
    ],

    /*
    |--------------------------------------------------------------------------
    | 支持的语言
    |--------------------------------------------------------------------------
    |
    | 定义项目支持的语言列表
    |
    */
    'supported_languages' => [
        'en' => 'English',
        'zh_CN' => '简体中文',
        'zh_HK' => '繁体中文',
        'th' => 'ไทย',
        'tk' => 'Türkmen',
    ],

	//默认语言
    'default_language' => 'en',

    /*
    |--------------------------------------------------------------------------
    | 本地翻译文件路径
    |--------------------------------------------------------------------------
    |
    | 定义本地翻译文件的存储路径
    |
    */
    'lang_path' => resource_path('lang'),

    /*
    |--------------------------------------------------------------------------
    | 扫描文件类型
    |--------------------------------------------------------------------------
    |
    | 定义需要扫描的文件扩展名
    |
    */
    'scan_file_extensions' => [
        'php',
        'blade.php',
    ],

    /*
    |--------------------------------------------------------------------------
    | 自动同步配置
    |--------------------------------------------------------------------------
    |
    | 配置是否自动同步到外部翻译系统
    |
    */
    'auto_sync' => env('TRANSLATION_AUTO_SYNC', false),

    /*
    |--------------------------------------------------------------------------
    | 批量处理配置
    |--------------------------------------------------------------------------
    |
    | 配置批量上传和处理的数量限制
    |
    */
    'batch_size' => env('TRANSLATION_BATCH_SIZE', 100),

    /*
    |--------------------------------------------------------------------------
    | 缓存配置
    |--------------------------------------------------------------------------
    |
    | 配置翻译收集结果的缓存设置
    |
    */
    'cache' => [
        'enabled' => env('TRANSLATION_CACHE_ENABLED', true),
        'key_prefix' => 'translation_collector:',
        'ttl' => env('TRANSLATION_CACHE_TTL', 3600), // 秒
    ],

    /*
    |--------------------------------------------------------------------------
    | 日志配置
    |--------------------------------------------------------------------------
    |
    | 配置翻译收集过程的日志记录
    |
    */
    'logging' => [
        'enabled' => env('TRANSLATION_LOGGING_ENABLED', true),
        'channel' => env('TRANSLATION_LOG_CHANNEL', 'daily'),
        'level' => env('TRANSLATION_LOG_LEVEL', 'info'),
    ],

    /*
    |--------------------------------------------------------------------------
    | 正则表达式配置
    |--------------------------------------------------------------------------
    |
    | 定义用于匹配翻译文本的正则表达式
    |
    */
    'regex_patterns' => [
        // PHP文件中的翻译函数调用
        'php' => [
            '/__\s*\(\s*[\'"]([^\'"]+)[\'"]\s*\)/',
            '/trans\s*\(\s*[\'"]([^\'"]+)[\'"]\s*\)/',
            '/Lang::get\s*\(\s*[\'"]([^\'"]+)[\'"]\s*\)/',
            '/trans_choice\s*\(\s*[\'"]([^\'"]+)[\'"]\s*,/',
        ],
        // Blade模板中的翻译调用
        'blade' => [
            '/@lang\s*\(\s*[\'"]([^\'"]+)[\'"]\s*\)/',
            '/\{\{\s*__\s*\(\s*[\'"]([^\'"]+)[\'"]\s*\)\s*\}\}/',
            '/\{\{\s*trans\s*\(\s*[\'"]([^\'"]+)[\'"]\s*\)\s*\}\}/',
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | 模块化架构支持
    |--------------------------------------------------------------------------
    |
    | 针对 nwidart/laravel-modules 的特殊配置
    |
    */
    'modules_support' => [
        'enabled' => true,
        'modules_path' => base_path('Modules'),
        'scan_module_paths' => [
            'Http/',
            'Resources/views/',
            'Console/',
            'Services/',
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | 报告配置
    |--------------------------------------------------------------------------
    |
    | 配置翻译收集报告的生成和格式
    |
    */
    'reports' => [
        'formats' => ['json', 'csv', 'html'],
        'default_format' => 'json',
        'output_path' => storage_path('app/translation-reports'),
        'include_statistics' => true,
        'include_missing_translations' => true,
        'include_unused_translations' => true,
    ],
];
